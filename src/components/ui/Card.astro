---
import Pill from "./Pill.astro";
import CustomButton from "./CustomButton.astro";
import PreviewIcon from "../../icons/PreviewIcon.astro";
import GithubOutlineIcon from "../../icons/GithubOutlineIcon.astro";
import MeshButton from "./MeshButton.astro";

interface Props {
  imageSrc?: string; // El ? significa que es opcional
  imageAlt?: string;
  projectTitle: string;
  projectDescription: string;
  previewLink?: string;
  githubLink?: string;
  techs?: string[];
}

const {
  imageSrc,
  imageAlt,
  projectTitle,
  projectDescription,
  previewLink,
  githubLink,
  techs = [],
} = Astro.props;
---

<div
  class="relative flex flex-col overflow-hidden rounded-4xl border-1 border-white/20"
>
  <!-- Imagen de fondo -->
  <picture class="absolute inset-0 -z-[2]">
    <img
      src={imageSrc ?? "https://m.media-amazon.com/images/I/71UzjXRiGHL.jpg"}
      alt={imageAlt ?? "Project Image"}
      class="w-full h-full object-cover"
      loading="lazy"
      decoding="async"
    />
  </picture>

  <!-- blur layer -->
  <div class="absolute inset-0 -z-[1] mask-t-from-45% backdrop-blur-lg"></div>

  <!-- capa oscura -->
  <div class="absolute inset-0 -z-[2] bg-black/40"></div>

  <div class="flex flex-col justify-between h-full w-full p-6 relative z-0">
    <!-- buttons -->
    <div class="relative flex gap-2 w-full">

      {previewLink && (
      <MeshButton
        text="Preview"
        Icon={PreviewIcon}
        textSize="text-base"
        textColor="text-slate-800"
        href={previewLink}
      />
      )}
      <CustomButton
      text="Repository"
      Icon={GithubOutlineIcon}
      textSize="text-base"
      textColor="text-white"
      bgColor="bg-zinc-900/60"
      href={githubLink}
      extraClass="font-medium rounded-xl"
      />
    </div>

    <div class="flex flex-col gap-2 items-start justify-end w-full h-full">
      <div class="flex flex-wrap gap-2 w-full">
        {techs.map((tech) => <Pill pillText={tech} />)}
      </div>

      <span class="text-2xl font-semibold line-clamp-2 text-white">
        {projectTitle}
      </span>

      <p class="text-sm text-pretty line-clamp-7 text-white/90">
        {projectDescription}
      </p>
    </div>
  </div>
</div>
